<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Purchase Order System | Castlerock Homes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="https://castlerock-po-assets-eu.s3.eu-north-1.amazonaws.com/POTrackerAssets/favicon.ico">

<link rel="icon" type="image/png" sizes="32x32"
      href="https://castlerock-po-assets-eu.s3.eu-north-1.amazonaws.com/POTrackerAssets/favicon-32x32.png">

<link rel="icon" type="image/png" sizes="16x16"
      href="https://castlerock-po-assets-eu.s3.eu-north-1.amazonaws.com/POTrackerAssets/favicon-16x16.png">

<link rel="apple-touch-icon" sizes="180x180"
      href="https://castlerock-po-assets-eu.s3.eu-north-1.amazonaws.com/POTrackerAssets/apple-touch-icon.png">

<link rel="icon" type="image/png" sizes="192x192"
      href="https://castlerock-po-assets-eu.s3.eu-north-1.amazonaws.com/POTrackerAssets/android-chrome-192x192.png">

<link rel="icon" type="image/png" sizes="512x512"
      href="https://castlerock-po-assets-eu.s3.eu-north-1.amazonaws.com/POTrackerAssets/android-chrome-512x512.png">

  <link rel="stylesheet" href="theme.css">

</head>
<body>

<header class="app-header">
  <div class="brand">
    <img src="assets/Logo.png" alt="Castlerock Homes">
    <span><h1>Purchase Order System</h1></span>
  </div>

  <div class="header-actions">
<div class="dropdown">
  <button class="btn-outline" onclick="toggleActionsMenu(this, event)">Actions ▾</button>
  <div id="actionsMenu" class="dropdown-menu">
    <button onclick="createPO()">Create Purchase Order</button>
    <button onclick="location.href='suppliers.html'">Edit Suppliers</button>
    <div class="divider"></div>
    <button onclick="location.href='admin.html'">Admin</button>
  </div>
</div>

<!-- REPORTS (SUPER ADMIN ONLY) -->
<div class="dropdown" id="reportsDropdown" style="display:none">
  <button class="btn-outline" onclick="toggleReportsMenu(this, event)">Reports ▾</button>
  <div id="reportsMenu" class="dropdown-menu">
    <button onclick="location.href='location-report.html'">
      By Location
    </button>
    <button onclick="location.href='supplier-report.html'">
  By Supplier
</button>

  </div>
</div>

    <button class="btn-outline" onclick="toggleFilters()">Filters</button>
    <button class="btn-outline" onclick="logout()">Logout</button>
  </div>
</header>

<main class="container">

  <!-- FILTER PANEL -->
  <div id="filterPanel" class="card dashboard-filters" style="display:none">

    <div class="filter-row">
      <label>Status</label>
      <select id="statusFilter">
        <option value="all">All</option>
        <option value="outstanding">Outstanding</option>
        <option value="complete">Fully Invoiced</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Supplier</label>
      <select id="supplierFilter">
        <option value="">All</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Site</label>
      <select id="siteFilter">
        <option value="">All</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Location</label>
      <select id="locationFilter">
        <option value="">All</option>
      </select>
    </div>
    
    <div class="filter-row">
      <label>Stage</label>
      <select id="stageFilter">
        <option value="">All</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Date From</label>
      <input type="date" id="dateFrom">
    </div>

    <div class="filter-row">
      <label>Date To</label>
      <input type="date" id="dateTo">
    </div>

    <div class="filter-row">
      <label>Value Min (€)</label>
      <input type="number" id="valueMin" step="0.01">
    </div>

    <div class="filter-row">
      <label>Value Max (€)</label>
      <input type="number" id="valueMax" step="0.01">
    </div>

    <div class="filter-actions">
      <button class="btn-outline" onclick="toggleFilters()">Close</button>
      <button class="btn-outline" onclick="clearFilters()">Clear Filters</button>
    </div>

  </div>

  <!-- PO TABLE -->
  <div class="card">
    <table class="po-table">
      <thead>
        <tr>
          <th>PO Number</th>
          <th>Date</th>
          <th>Supplier</th>
          <th>Location</th>
          <th>Stage</th>
          <th>Net (€)</th>
        </tr>
      </thead>
      <tbody id="poTable"></tbody>
    </table>
  </div>

<div id="totalsBar" class="totals-bar">
  <div>
    <strong>Count:</strong>
    <span id="poCount">0</span>
  </div>
  <div>
    <strong>Total (ex VAT):</strong>
    <span id="totalNet">€0.00</span>
  </div>
  <div>
    <strong>Total (inc VAT):</strong>
    <span id="totalGross">€0.00</span>
  </div>
</div>


</main>

<script src="dashboard.js"></script>

<script>
  function logout() {
    localStorage.clear();
    location.href = 'login.html';
  }

  function toggleFilters() {
    const panel = document.getElementById('filterPanel');
    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
  }

  function createPO() {
    location.href = 'create-po.html';
  }

  function exportExcel() {
    location.href = '/exports/purchase-orders.xlsx';
  }


</script>

<script src="/public/assets/js/ui.js" defer></script>


</body>
</html>
