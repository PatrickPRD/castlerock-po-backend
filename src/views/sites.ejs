<%- include('partials/head', { pageTitle: 'Sites', styles: ['admin.css'] }) %>
<%- include('partials/header', { pageTitle: 'Sites' }) %>

<main class="container">

  <div class="card" id="sitesSection">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
      <h3 style="margin: 0;">Sites</h3>
      <button class="btn btn-primary btn-compact" type="button" onclick="openAddSiteModal()">Add Site</button>
    </div>

    <div class="table-scroll">
      <table class="po-table site-table">
        <thead>
          <tr>
            <th>Site</th>
            <th>Site Letter</th>
            <th>Address</th>
            <th style="width:160px">Actions</th>
          </tr>
        </thead>
        <tbody id="siteTable"></tbody>
      </table>
    </div>
  </div>

  <div class="modal fade" id="siteModal" tabindex="-1" aria-labelledby="siteModalLabel" aria-hidden="true" style="display:none;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="siteModalLabel">Add Site</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p id="siteEditNotice" class="edit-notice" style="display:none;">
            Editing existing item â€” changes affect all Purchase Orders - Site Letter cannot be changed
          </p>
          <div class="form-row" style="flex-direction: column; gap: 10px;">
            <input id="siteName" placeholder="Site name">
            <input
              id="siteLetter"
              placeholder="Letter"
              maxlength="1"
              style="width:80px;text-transform:uppercase"
            >
            <textarea id="siteAddress" placeholder="Address" rows="3"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button id="saveSiteBtn" class="btn btn-primary" onclick="saveSite()">Add Site</button>
        </div>
      </div>
    </div>
  </div>

</main>

<%- include('partials/footer', { scripts: ['/ui.js', 'sites.js'], includeNavScript: true }) %>
