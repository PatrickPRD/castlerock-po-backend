<%- include('partials/head', { pageTitle: 'Labour Costs', styles: ['labour-costs.css'] }) %>
<%- include('partials/header', { pageTitle: 'Labour Costs' }) %>

<main class="container">
  <div id="filterPanel" class="card dashboard-filters" style="display:none;">
    <div class="filter-row">
      <label for="siteFilter">Site</label>
      <select id="siteFilter">
        <option value="">All Sites</option>
      </select>
    </div>
    <div class="filter-row">
      <label for="locationFilterInput">Location</label>
      <select id="locationFilter" disabled>
        <option value="">Select a site first</option>
      </select>
    </div>
    <div class="filter-row">
      <label for="workerFilter">Worker</label>
      <select id="workerFilter">
        <option value="">All Workers</option>
      </select>
    </div>
    <div class="filter-actions">
      <button class="btn btn-outline-secondary" onclick="toggleFilters()">Close</button>
      <button class="btn btn-outline-secondary" onclick="clearFilters()">Clear Filters</button>
    </div>
  </div>

  <div class="card">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3 style="margin: 0;">Labour Costs</h3>
      <button class="btn btn-outline-secondary" onclick="toggleFilters()">
        <i class="bi bi-funnel me-1"></i>Filters
      </button>
    </div>
  </div>

  <div class="card">
    <table class="po-table">
      <thead>
        <tr>
          <th onclick="sortTable('site')" class="sortable">Site <span class="sort-indicator"></span></th>
          <th onclick="sortTable('location')" class="sortable">Location <span class="sort-indicator"></span></th>
          <th onclick="sortTable('labour_cost')" class="sortable">Labour Spend (<span data-currency-symbol>€</span>) <span class="sort-indicator"></span></th>
        </tr>
      </thead>
      <tbody id="labourTable"></tbody>
    </table>
  </div>

  <div id="totalsBar" class="totals-bar">
    <div>
      <strong>Days Worked:</strong>
      <span id="labourDaysWorked">0</span>
    </div>
    <div>
      <strong>Total Labour Spend:</strong>
      <span id="labourTotal"><span data-currency-symbol>€</span>0.00</span>
    </div>
    <div>
      <strong>Start Date:</strong>
      <span id="labourStartDate">-</span>
    </div>
    <div>
      <strong>End Date:</strong>
      <span id="labourEndDate">-</span>
    </div>
  </div>
</main>

<%- include('partials/footer', { scripts: ['/ui.js', 'labour-costs.js'], includeNavScript: true }) %>
