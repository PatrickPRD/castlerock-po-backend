<%- include('partials/head', { title: 'Purchase Order System | Castlerock Homes' }) %>
<%- include('partials/header', { pageTitle: 'Purchase Order System', showFiltersButton: true }) %>

<main class="container">

  <div id="filterPanel" class="card dashboard-filters" style="display:none">

    <div class="filter-row">
      <label>Status</label>
      <select id="statusFilter">
        <option value="all">All</option>
        <option value="outstanding">Outstanding</option>
        <option value="complete">Fully Invoiced</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Supplier</label>
      <select id="supplierFilter">
        <option value="">All</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Site</label>
      <select id="siteFilter">
        <option value="">All</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Location</label>
      <select id="locationFilter">
        <option value="">All</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Stage</label>
      <select id="stageFilter">
        <option value="">All</option>
      </select>
    </div>

    <div class="filter-row">
      <label>Date From</label>
      <input type="date" id="dateFrom">
    </div>

    <div class="filter-row">
      <label>Date To</label>
      <input type="date" id="dateTo">
    </div>

    <div class="filter-row">
      <label>Value Min (€)</label>
      <input type="number" id="valueMin" step="0.01">
    </div>

    <div class="filter-row">
      <label>Value Max (€)</label>
      <input type="number" id="valueMax" step="0.01">
    </div>

    <div class="filter-actions">
      <button class="btn-outline" onclick="toggleFilters()">Close</button>
      <button class="btn-outline" onclick="clearFilters()">Clear Filters</button>
    </div>

  </div>

  <div class="card">
    <table class="po-table">
      <thead>
        <tr>
          <th>PO Number</th>
          <th>Date</th>
          <th>Supplier</th>
          <th>Location</th>
          <th>Stage</th>
          <th>Net (€)</th>
        </tr>
      </thead>
      <tbody id="poTable"></tbody>
    </table>
  </div>

  <div id="totalsBar" class="totals-bar">
    <div>
      <strong>Count:</strong>
      <span id="poCount">0</span>
    </div>
    <div>
      <strong>Total (ex VAT):</strong>
      <span id="totalNet">€0.00</span>
    </div>
    <div>
      <strong>Total (inc VAT):</strong>
      <span id="totalGross">€0.00</span>
    </div>
  </div>

</main>

<%- include('partials/footer', { scripts: ['/ui.js', 'dashboard.js'], includeNavScript: true }) %>
